"use strict";(self.webpackChunkidentity_express_manager_ui=self.webpackChunkidentity_express_manager_ui||[]).push([[969],{4969:(Je,x,l)=>{l.r(x),l.d(x,{ViewUsersModule:()=>qe});var o=l(6895),w=l(8185),b=l(2979),p=l(9066),L=l(5503),I=l(8783),q=l(8265),V=l(85),J=l(9650),O=l(5785),Q=l(4091),N=l(5971),D=l(5084),Y=l(5554),m=l(2976),A=l(3431),v=l(590),e=l(4650),u=l(4961),Z=l(3667),g=l(1481),S=l(7111),R=l(7185),h=l(7696),f=l(3110);function F(i,a){1&i&&(e.TgZ(0,"div",4)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"UserDetails.NoClaimsMessage")," "))}function M(i,a){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.displayName)}}function P(i,a){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.type)}}function E(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.value," ")}}function K(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"standardDate"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.value),"")}}function $(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"standardDateTime"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.value),"")}}function j(i,a){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,K,3,3,"span",12),e.YNc(2,$,3,3,"span",12),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","birthdate"==t.type),e.xp6(1),e.Q6J("ngIf","birthdate"!=t.type)}}function X(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.True")))}function B(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.False")))}function G(i,a){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,X,3,3,"div",12),e.YNc(2,B,3,3,"div",12),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","true"==t.value),e.xp6(1),e.Q6J("ngIf","false"==t.value)}}function H(i,a){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,E,2,1,"span",12),e.YNc(2,j,3,2,"span",12),e.YNc(3,G,3,2,"span",12),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","DateTime"!=t.format&&"Boolean"!=t.format),e.xp6(1),e.Q6J("ngIf","DateTime"==t.format),e.xp6(1),e.Q6J("ngIf","Boolean"==t.format)}}function z(i,a){1&i&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Policy")," "))}function W(i,a){if(1&i&&(e.TgZ(0,"tr",11)(1,"td"),e.YNc(2,M,2,1,"b",12),e.YNc(3,P,2,1,"b",12),e.qZA(),e.TgZ(4,"td"),e.YNc(5,H,4,3,"div",13),e.qZA(),e.TgZ(6,"td"),e.YNc(7,z,3,3,"span",14),e.qZA()()),2&i){const t=a.$implicit,s=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.displayName),e.xp6(1),e.Q6J("ngIf",!t.displayName),e.xp6(2),e.Q6J("ngIf",!t.editing),e.xp6(2),e.Q6J("ngIf",s.isPolicyClaim(t))}}function k(i,a){if(1&i&&(e.TgZ(0,"table",5)(1,"thead")(2,"tr")(3,"th",6),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",7)(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"tbody",9),e.YNc(14,W,8,4,"tr",10),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"Common.Name")," "),e.xp6(3),e.hij(" ",e.lcZ(8,6,"Common.Value")," "),e.xp6(4),e.hij("",e.lcZ(12,8,"Common.Policy")," "),e.xp6(3),e.Q6J("ngForOf",t.optionalClaims)}}function ee(i,a){if(1&i&&e._UZ(0,"app-pager",17),2&i){const t=e.oxw();e.Q6J("totalResults",null==t.optionalClaims?null:t.optionalClaims.length)}}let te=(()=>{class i{constructor(t,s,n,c,d,Ve){this.userService=t,this.claimTypesService=s,this.translate=n,this.titleService=c,this.apClaimsService=d,this.toastr=Ve,this.optionalClaims=[]}ngOnInit(){this.combinedObservable=this.claimTypesService.getClaimTypes(null,null).pipe((0,A.a)(this.userService.getCachedUser(),(t,s)=>({claimTypes:t,user:s})),(0,v.P)()).subscribe(t=>{this.claimTypes=t.claimTypes,this.user=t.user,this.claims=t.user.claims,this.sortClaims();const s=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Additional Details")+" - "+m.de.SITE_TITLE;this.titleService.setTitle(s)})}isPolicyClaim(t){return this.apClaimsService.isPolicyClaim(t)}sortClaims(){for(const t of this.claims)for(const s of this.claimTypes)if(s.name===t.type){const n={typeId:s.id,format:s.valueType,type:t.type,displayName:s.displayName,value:t.value,editing:!1,required:s.required};s.rule&&(n.regex=s.rule,n.failureMessage=s.ruleValidationFailureDescription),s.required||this.optionalClaims.push(n)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.K),e.Y36(Z.M),e.Y36(p.sK),e.Y36(g.Dx),e.Y36(S.n),e.Y36(R._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-user-additional-details"]],decls:4,vars:3,consts:[["id","editUserClaims",1,"tw-container","tw-mx-auto"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable"],[1,"tw-w-1/4"],[1,"tw-w-1"],[1,"sr-only"],["id","claimsTable","id","optionalClaims"],["class","claim",4,"ngFor","ngForOf"],[1,"claim"],[4,"ngIf"],["class","tw-truncate",4,"ngIf"],["class","tw-pill",4,"ngIf"],[1,"tw-truncate"],[1,"tw-pill"],["hidePager","true",3,"totalResults"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,F,4,3,"div",1),e.YNc(2,k,15,10,"table",2),e.YNc(3,ee,1,1,"app-pager",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.optionalClaims&&s.optionalClaims.length<=0),e.xp6(1),e.Q6J("ngIf",(null==s.optionalClaims?null:s.optionalClaims.length)>0),e.xp6(1),e.Q6J("ngIf",(null==s.optionalClaims?null:s.optionalClaims.length)>0))},dependencies:[o.sg,o.O5,h.P,p.X$,f.C9,f.g9],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),i})();var U=l(5698),T=l(7608),ie=l(5925);function se(i,a){1&i&&e._UZ(0,"app-simple-loader")}function ae(i,a){1&i&&(e.TgZ(0,"div",7)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.Applications.None")))}function le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",14)(1,"td",15),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.modalInfo(c))}),e.TgZ(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",16),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.modalInfo(c))}),e._uU(5),e.qZA(),e.TgZ(6,"td")(7,"button",17),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.modalInfo(c))}),e._UZ(8,"span",18),e.TgZ(9,"span",11),e._uU(10),e.ALo(11,"translate"),e.qZA()()()()}if(2&i){const t=a.$implicit;e.xp6(3),e.Oqu(t.clientName),e.xp6(2),e.hij(" ",t.clientDescription," "),e.xp6(5),e.Oqu(e.lcZ(11,3,"Common.Info"))}}function ne(i,a){if(1&i&&(e.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",9),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",10)(10,"span",11),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"tbody",12),e.YNc(14,le,12,5,"tr",13),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"UserDetails.Name")),e.xp6(3),e.Oqu(e.lcZ(8,6,"Common.Description")),e.xp6(4),e.Oqu(e.lcZ(12,8,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.userApps)}}function oe(i,a){if(1&i&&e._UZ(0,"app-pager",19),2&i){const t=e.oxw();e.Q6J("totalResults",null==t.userApps?null:t.userApps.length)}}function pe(i,a){if(1&i&&e._UZ(0,"input",36),2&i){const t=e.oxw(2);e.Q6J("value",t.selectedApp.expires)}}function re(i,a){1&i&&(e._UZ(0,"input",36),e.ALo(1,"translate")),2&i&&e.Q6J("value",e.lcZ(1,1,"Common.Never"))}function ce(i,a){if(1&i&&(e.TgZ(0,"li",40)(1,"span",41),e._uU(2),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t)}}function de(i,a){if(1&i&&(e.TgZ(0,"dl")(1,"dt",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"dd")(5,"ul",38),e.YNc(6,ce,3,1,"li",39),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"Users.Applications.Accessible")),e.xp6(4),e.Q6J("ngForOf",t.selectedApp.scopes)}}const me=function(){return{backdrop:"static",animated:!1,keyboard:!0}};function ue(i,a){if(1&i&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h5",24),e._uU(5),e.qZA(),e.TgZ(6,"button",25),e._UZ(7,"span",26),e.TgZ(8,"span",11),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",27)(12,"app-form-row",28),e._UZ(13,"input",29),e.qZA(),e.TgZ(14,"app-form-row",28),e._UZ(15,"input",30),e.qZA(),e.TgZ(16,"app-form-row",28)(17,"textarea",31),e._uU(18),e.qZA()(),e.TgZ(19,"app-form-row",28),e._UZ(20,"input",32),e.qZA(),e.TgZ(21,"app-form-row",28),e._UZ(22,"input",33),e.qZA(),e.TgZ(23,"app-form-row",28),e.YNc(24,pe,1,1,"input",34),e.YNc(25,re,2,3,"input",34),e.qZA(),e.YNc(26,de,7,4,"dl",2),e.qZA(),e._UZ(27,"div",35),e.qZA()()()),2&i){const t=e.oxw();e.Q6J("config",e.DdM(25,me)),e.xp6(5),e.Oqu(t.selectedApp.clientName),e.xp6(4),e.Oqu(e.lcZ(10,23,"Common.Close")),e.xp6(3),e.Q6J("id","selectedAppName")("label","Common.Name"),e.xp6(1),e.Q6J("value",t.selectedApp.clientName),e.xp6(1),e.Q6J("id","selectedAppName")("label","Common.LogoURL"),e.xp6(1),e.Q6J("value",t.selectedApp.clientLogoUrl),e.xp6(1),e.Q6J("id","selectedAppDescription")("label","Common.Description"),e.xp6(2),e.Oqu(t.selectedApp.clientDescription),e.xp6(1),e.Q6J("id","selectedAppURL")("label","Common.URL"),e.xp6(1),e.Q6J("value",t.selectedApp.clientUrl),e.xp6(1),e.Q6J("id","selectedAppCreated")("label","Common.Created"),e.xp6(1),e.Q6J("value",t.selectedApp.created),e.xp6(1),e.Q6J("id","selectedAppExpires")("label","Common.Expires"),e.xp6(1),e.Q6J("ngIf",t.selectedApp.expires),e.xp6(1),e.Q6J("ngIf",!t.selectedApp.expires),e.xp6(1),e.Q6J("ngIf",(null==t.selectedApp?null:t.selectedApp.scopes.length)>0)}}let ge=(()=>{class i{constructor(t,s,n){this.titleService=t,this.userService=s,this.translate=n,this.isLoading=!0}ngOnInit(){this.userService.getCachedUser().pipe((0,U.q)(1)).subscribe(t=>{this.user=t,this.userService.getUserApps(this.user.subject).subscribe(s=>{this.userApps=s,this.isLoading=!1;const n=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Applications")+" - "+m.de.SITE_TITLE;this.titleService.setTitle(n)},s=>{this.isLoading=!1,this.userApps=null})})}modalInfo(t){this.selectedApp=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.Dx),e.Y36(u.K),e.Y36(p.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-user-applications"]],decls:10,vars:8,consts:[["id","editUserApplications",1,"tw-container","tw-mx-auto"],[1,"cms"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable selectable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["bsModal","","id","appInfoModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable","selectable","hover"],[1,"tw-hidden","md:tw-table-cell"],[1,"tw-w-1"],[1,"sr-only"],["id","userAppList"],["class","group",4,"ngFor","ngForOf"],[1,"group"],["data-toggle","modal","data-target","#appInfoModal",1,"tw-max-w-0","tw-truncate",3,"click"],["data-toggle","modal","data-target","#appInfoModal",1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell",3,"click"],["data-toggle","modal","data-target","#appInfoModal",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["aria-hidden","true",1,"'fas","fa-eye'"],["hidePager","true",3,"totalResults"],["bsModal","","id","appInfoModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-body","scrollbars"],[3,"id","label"],["id","selectedAppName","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppLogoUrl","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppDescription","readonly","",1,"tw-form-control"],["id","selectedAppURL","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppCreated","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppExpires","class","tw-form-control","readonly","",3,"value",4,"ngIf"],[1,"modal-footer"],["id","selectedAppExpires","readonly","",1,"tw-form-control",3,"value"],[1,"tw-font-semibold","tw-text-sm","tw-mb-2"],[1,"tw-flex","tw-flex-wrap","tw-item-start","tw--mt-2","tw--ml-2"],["class","tw-pt-2 tw-pl-2",4,"ngFor","ngForOf"],[1,"tw-pt-2","tw-pl-2"],[1,"tw-pill"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,se,1,0,"app-simple-loader",2),e.YNc(6,ae,4,3,"div",3),e.YNc(7,ne,15,10,"table",4),e.YNc(8,oe,1,1,"app-pager",5),e.qZA(),e.YNc(9,ue,28,26,"div",6)),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,6,"Users.Applications.Access")),e.xp6(2),e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",0==(null==s.userApps?null:s.userApps.length)&&!s.isLoading),e.xp6(1),e.Q6J("ngIf",(null==s.userApps?null:s.userApps.length)>0),e.xp6(1),e.Q6J("ngIf",(null==s.userApps?null:s.userApps.length)>0&&!s.isLoading),e.xp6(1),e.Q6J("ngIf",s.selectedApp))},dependencies:[o.sg,o.O5,h.P,T.L,ie.w,p.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),i})();var _=l(2951),fe=l(8176),y=l(9655),_e=l(7235),ve=l(4889),C=l(2830);const r=function(i){return[i]};function he(i,a){if(1&i&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-readonly",6),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("label","Users.LockoutEnd"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(3,r,t.formatDateTimeReadonlyField(t.detailsMap.lockoutEnd)))}}function Te(i,a){if(1&i&&(e.TgZ(0,"form")(1,"app-form-row",5),e._UZ(2,"app-readonly",6),e.qZA(),e.TgZ(3,"app-form-row",5),e._UZ(4,"app-readonly",6),e.qZA(),e.TgZ(5,"app-form-row",5),e._UZ(6,"app-readonly",6),e.qZA(),e.TgZ(7,"app-form-row",5),e._UZ(8,"app-readonly",6),e.qZA(),e.TgZ(9,"app-form-row",5),e._UZ(10,"app-readonly",6),e.qZA(),e.TgZ(11,"app-form-row",5),e._UZ(12,"app-readonly",6),e.qZA(),e.YNc(13,he,2,5,"app-form-row",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("label","Common.ID"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(19,r,t.detailsMap.subject)),e.xp6(1),e.Q6J("label","Users.FirstName"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(21,r,t.detailsMap.firstName)),e.xp6(1),e.Q6J("label","Users.LastName"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(23,r,t.detailsMap.lastName)),e.xp6(1),e.Q6J("label","Users.Username"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(25,r,t.detailsMap.username)),e.xp6(1),e.Q6J("label","Users.Email"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(27,r,t.detailsMap.email)),e.xp6(1),e.Q6J("label","Users.LockoutEnabled"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(29,r,t.detailsMap.lockoutEnabled)),e.xp6(1),e.Q6J("ngIf",t.user.lockoutEnabled)}}function xe(i,a){if(1&i&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-readonly",6),e.qZA()),2&i){const t=a.$implicit,s=e.oxw();e.Q6J("label",t.type),e.xp6(1),e.Q6J("fieldType",s.ReadOnlyFieldType.Single)("values",e.VKq(3,r,s.requiredMap[t.type]))}}function we(i,a){if(1&i&&(e.TgZ(0,"form",8)(1,"app-form-row",9),e._UZ(2,"app-readonly",6),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("label","UserDetails.EnabledTwoFactorReadOnly")("help","UserDetails.EnabledTwoFactorHelp")("isLast",!0),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(5,r,t.detailsMap.twoFactorEnabled))}}let Ae=(()=>{class i{constructor(t,s,n,c,d){this.userService=t,this.errorService=s,this.translate=n,this.claimsService=c,this.titleService=d,this.requiredClaims=[],this.detailsMap={},this.requiredMap={},this.prettyDateTimePipe=new f.Xm,this.standardDatePipe=new f.g9}ngOnInit(){this.combinedObservable=this.claimsService.getClaimTypes(null,null).pipe((0,A.a)(this.userService.getCachedUser(),(t,s)=>({claimTypes:t,user:s})),(0,v.P)()).subscribe(t=>{this.user=t.user,this.claimTypes=t.claimTypes,this.sortClaims(),this.detailsMap=new _e.$(t.user),this.mapRequiredClaimsToReadOnlyObject();const s=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Details")+" - "+m.de.SITE_TITLE;this.titleService.setTitle(s)},t=>{this.errorService.handleError(t)})}ngOnDestroy(){this.combinedObservable.unsubscribe()}mapRequiredClaimsToReadOnlyObject(){this.requiredClaims.forEach(t=>{if(!(0,fe.Ew)(t.value)){if("DateTime"===t.format){const s="birthdate"==t.type?this.standardDatePipe.transform(t.value):this.prettyDateTimePipe.transform(t.value);return void(this.requiredMap[t.type]=new _.I(s))}this.requiredMap[t.type]=new _.I(t.value)}})}sortClaims(){for(const t of this.claimTypes)if(t.required){const s={typeId:t.id,format:t.valueType,value:"",type:t.name,displayName:t.displayName,editing:!1,required:t.required};t.rule&&(s.regex=t.rule,s.failureMessage=t.ruleValidationFailureDescription),this.requiredClaims.push(s)}for(const t of this.user.claims){const s=this.requiredClaims.find(n=>n.type===t.type);s&&(s.value=t.value)}}get ReadOnlyFieldType(){return y.O}formatDateTimeReadonlyField(t){return new _.I(this.prettyDateTimePipe.transform(t.MainText))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.K),e.Y36(ve.T),e.Y36(p.sK),e.Y36(Z.M),e.Y36(g.Dx))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-user-details"]],decls:5,vars:3,consts:[["id","userDetails",1,"tw-container","tw-mx-auto"],[4,"ngIf"],["id","requiredClaims"],[3,"label",4,"ngFor","ngForOf"],["id","twofactor",4,"ngIf"],[3,"label"],[3,"fieldType","values"],[3,"label",4,"ngIf"],["id","twofactor"],[3,"label","help","isLast"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Te,14,31,"form",1),e.TgZ(2,"form",2),e.YNc(3,xe,2,5,"app-form-row",3),e.qZA(),e.YNc(4,we,3,7,"form",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.user),e.xp6(2),e.Q6J("ngForOf",s.requiredClaims),e.xp6(1),e.Q6J("ngIf",s.user))},dependencies:[o.sg,o.O5,T.L,C.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),i})();function Ze(i,a){1&i&&(e.TgZ(0,"div",4)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"UserLogins.NoLogins")))}function Ue(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",10)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",11),e._uU(5),e.qZA(),e.TgZ(6,"td",11),e._uU(7),e.qZA()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(t.providerDisplayName),e.xp6(2),e.Oqu(t.loginProvider),e.xp6(2),e.Oqu(t.providerKey)}}function ye(i,a){if(1&i&&(e.TgZ(0,"table",5)(1,"thead")(2,"tr")(3,"th",6),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",7),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",7),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"tbody",8),e.YNc(13,Ue,8,3,"tr",9),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"UserLogins.ProviderDisplayName")),e.xp6(3),e.Oqu(e.lcZ(8,6,"UserLogins.LoginProvider")),e.xp6(3),e.Oqu(e.lcZ(11,8,"UserLogins.ProviderKey")),e.xp6(3),e.Q6J("ngForOf",t.userLogins)}}function Ce(i,a){if(1&i&&e._UZ(0,"app-pager",12),2&i){const t=e.oxw();e.Q6J("totalResults",null==t.userLogins?null:t.userLogins.length)}}let be=(()=>{class i{constructor(t,s,n){this.userService=t,this.titleService=s,this.translate=n,this.userLogins=[],this.isLoading=!0}ngOnInit(){this.userService.getCachedUser().pipe((0,U.q)(1)).subscribe(t=>{this.user=t,this.userService.getUserLogins(this.user.subject).subscribe(s=>{this.userLogins=s,this.isLoading=!1;const n=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Logins")+" - "+m.de.SITE_TITLE;this.titleService.setTitle(n)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.K),e.Y36(g.Dx),e.Y36(p.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-user-logins"]],decls:4,vars:3,consts:[[1,"tw-container","tw-mx-auto"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable"],[1,"md:tw-w-1/4"],[1,"tw-hidden","md:tw-table-cell"],["id","userLoginsList"],[4,"ngFor","ngForOf"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell"],["hidePager","true",3,"totalResults"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ze,4,3,"div",1),e.YNc(2,ye,14,10,"table",2),e.YNc(3,Ce,1,1,"app-pager",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",0==(null==s.userLogins?null:s.userLogins.length)&&!s.isLoading),e.xp6(1),e.Q6J("ngIf",(null==s.userLogins?null:s.userLogins.length)>0),e.xp6(1),e.Q6J("ngIf",(null==s.userLogins?null:s.userLogins.length)>0))},dependencies:[o.sg,o.O5,h.P,p.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),i})();function Le(i,a){if(1&i&&(e.TgZ(0,"div",1)(1,"app-form-row",2),e._UZ(2,"app-readonly",3),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("label","Users.AssignedRoles"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Multi)("values",t.assignedRoles)}}const Ie=[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:Ae},{path:"roles",component:(()=>{class i{constructor(t,s,n){this.userService=t,this.titleService=s,this.translate=n,this.assignedRoles=[]}ngOnInit(){this.userService.getCachedUser().pipe((0,v.P)()).subscribe(t=>{this.assignedRoles=t.roles.map(n=>new _.I(n.name,n.description));const s=this.translate.instant("Users.Singular")+" "+t.username+" "+this.translate.instant("Nav.Roles")+" - "+m.de.SITE_TITLE;this.titleService.setTitle(s)})}get ReadOnlyFieldType(){return y.O}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.K),e.Y36(g.Dx),e.Y36(p.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-user-roles"]],decls:1,vars:1,consts:[["class","tw-container tw-mx-auto","id","roles",4,"ngIf"],["id","roles",1,"tw-container","tw-mx-auto"],[3,"label"],[3,"fieldType","values"]],template:function(t,s){1&t&&e.YNc(0,Le,3,3,"div",0),2&t&&e.Q6J("ngIf",s.assignedRoles)},dependencies:[o.O5,T.L,C.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),i})()},{path:"additionaldetails",component:te},{path:"applications",component:ge},{path:"userlogins",component:be},{path:"useraudits",component:Y.L}];let qe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[I.L,V.e],imports:[o.ez,w.Bz.forChild(Ie),p.aw.forChild({extend:!0}),L.D,D.y,O.U,b.fQ,J.I,q.j,N.s,Q.G,w.Bz]}),i})()}}]);